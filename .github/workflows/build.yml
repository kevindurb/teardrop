name: Build STL

on: [push]

jobs:
  prepare:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

  build:
    runs-on: ubuntu-latest
    container:
      image: openscad/openscad
      volumes:
        - ${{ github.workspace }}:/openscad
    needs: prepare
    steps:
      - name: Create dist directory
        run: mkdir ./dist

      - name: Build STL
        run: openscad /openscad/src/models/teardrop.scad -o /openscad/dist/teardrop.stl
